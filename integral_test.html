<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§¯åˆ†å…¬å¼æµ‹è¯•</title>
    <script>
        // é…ç½®MathJax - ä¸ä¸»åº”ç”¨ç›¸åŒçš„é…ç½®
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                packages: {'[+]': ['ams', 'newcommand', 'autoload', 'color', 'physics', 'cancel', 'mathtools']},
                processEscapes: true,
                processEnvironments: true,
                tags: 'ams',
                processRefs: true,
                macros: {
                    RR: "{\\mathbb{R}}",
                    CC: "{\\mathbb{C}}",
                    NN: "{\\mathbb{N}}",
                    ZZ: "{\\mathbb{Z}}",
                    QQ: "{\\mathbb{Q}}",
                    vec: ["\\mathbf{#1}", 1],
                    norm: ["\\left\\|#1\\right\\|", 1],
                    abs: ["\\left|#1\\right|", 1],
                    floor: ["\\left\\lfloor#1\\right\\rfloor", 1],
                    ceil: ["\\left\\lceil#1\\right\\rceil", 1]
                }
            },
            chtml: {
                scale: 1.3,
                minScale: 1.0,
                mtextInheritFont: true,
                displayAlign: 'center',
                displayIndent: '0'
            },
            options: {
                processHtmlClass: 'markdown-content|math-content',
                ignoreHtmlClass: 'tex2jax_ignore',
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            },
            loader: {
                load: ['[tex]/ams', '[tex]/color', '[tex]/newcommand', '[tex]/autoload', '[tex]/cancel', '[tex]/mathtools']
            },
            startup: {
                pageReady: () => {
                    console.log('MathJaxé¡µé¢å‡†å¤‡å°±ç»ª');
                    return MathJax.startup.defaultPageReady();
                },
                ready: () => {
                    MathJax.startup.defaultReady();
                    console.log('MathJaxå·²å‡†å¤‡å°±ç»ª');
                }
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 30px;
            line-height: 1.8;
            background: #f8f9fa;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        
        .test-section {
            background: #f8f9fa;
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .test-section h2 {
            color: #495057;
            margin-top: 0;
            font-size: 1.3em;
        }
        
        .math-content {
            background: white;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        .inline-math {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .block-math {
            background: #fff3e0;
            padding: 25px;
            border-radius: 6px;
            margin: 15px 0;
            text-align: center;
        }
        
        /* æ•°å­¦å…¬å¼æ ·å¼ */
        .math-content mjx-container {
            margin: 0.5em 0;
        }
        
        .math-content mjx-container[display="block"] {
            margin: 1.5em auto;
            text-align: center;
        }
        
        .math-content mjx-container[jax="CHTML"] {
            font-size: 1.2em;
        }
        
        .math-content mjx-container[display="inline"] {
            display: inline-block;
            vertical-align: middle;
            margin: 0 0.2em;
        }
        
        .math-content mjx-container[display="block"] {
            display: block;
            margin: 1.5em auto;
            text-align: center;
            max-width: 100%;
            overflow-x: auto;
        }
        
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #6c757d;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§® ç§¯åˆ†å…¬å¼æ¸²æŸ“æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>æ‚¨çš„é«˜æ–¯ç§¯åˆ†å…¬å¼</h2>
            
            <div class="inline-math">
                <strong>è¡Œå†…å…¬å¼ï¼š</strong>
                <div class="math-content">
                    è¿™æ˜¯è‘—åçš„é«˜æ–¯ç§¯åˆ†ï¼š$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$ï¼Œå®ƒåœ¨æ¦‚ç‡è®ºä¸­éå¸¸é‡è¦ã€‚
                </div>
            </div>
            
            <div class="block-math">
                <strong>å—çº§å…¬å¼ï¼š</strong>
                <div class="math-content">
                    $$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ç›¸å…³ç§¯åˆ†å…¬å¼</h2>
            
            <div class="math-content">
                <p><strong>æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š</strong></p>
                $$\int_{-\infty}^{\infty} \frac{1}{\sqrt{2\pi}} e^{-\frac{x^2}{2}} dx = 1$$
                
                <p><strong>ä¸€èˆ¬é«˜æ–¯ç§¯åˆ†ï¼š</strong></p>
                $$\int_{-\infty}^{\infty} e^{-ax^2} dx = \sqrt{\frac{\pi}{a}} \quad (a > 0)$$
                
                <p><strong>å¸¦å‚æ•°çš„é«˜æ–¯ç§¯åˆ†ï¼š</strong></p>
                $$\int_{-\infty}^{\infty} e^{-ax^2 + bx + c} dx = \sqrt{\frac{\pi}{a}} e^{c + \frac{b^2}{4a}} \quad (a > 0)$$
            </div>
        </div>
        
        <div class="test-section">
            <h2>å…¶ä»–å¸¸è§ç§¯åˆ†</h2>
            
            <div class="math-content">
                <p><strong>ä¼½é©¬å‡½æ•°ï¼š</strong></p>
                $$\Gamma(n) = \int_0^{\infty} x^{n-1} e^{-x} dx$$
                
                <p><strong>è´å¡”å‡½æ•°ï¼š</strong></p>
                $$B(x,y) = \int_0^1 t^{x-1}(1-t)^{y-1} dt$$
                
                <p><strong>æ¤­åœ†ç§¯åˆ†ï¼š</strong></p>
                $$K(k) = \int_0^{\frac{\pi}{2}} \frac{d\theta}{\sqrt{1-k^2\sin^2\theta}}$$
            </div>
        </div>
        
        <div class="debug-info" id="debugInfo">
            <strong>è°ƒè¯•ä¿¡æ¯ï¼š</strong><br>
            MathJaxçŠ¶æ€: <span id="mathJaxStatus" class="status">æ£€æŸ¥ä¸­...</span><br>
            æ¸²æŸ“çŠ¶æ€: <span id="renderStatus" class="status">ç­‰å¾…ä¸­...</span><br>
            é¡µé¢åŠ è½½æ—¶é—´: <span id="loadTime">è®¡ç®—ä¸­...</span>
        </div>
    </div>
    
    <script>
        // è°ƒè¯•å’ŒçŠ¶æ€ç›‘æ§
        const startTime = Date.now();
        
        function updateStatus() {
            const mathJaxStatus = document.getElementById('mathJaxStatus');
            const renderStatus = document.getElementById('renderStatus');
            const loadTime = document.getElementById('loadTime');
            
            if (window.MathJax && window.MathJax.typesetPromise) {
                mathJaxStatus.textContent = 'å·²åŠ è½½';
                mathJaxStatus.className = 'status success';
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ¸²æŸ“çš„æ•°å­¦å…¬å¼
                const mathElements = document.querySelectorAll('mjx-container');
                if (mathElements.length > 0) {
                    renderStatus.textContent = `å·²æ¸²æŸ“ ${mathElements.length} ä¸ªå…¬å¼`;
                    renderStatus.className = 'status success';
                } else {
                    renderStatus.textContent = 'æœªæ£€æµ‹åˆ°æ¸²æŸ“ç»“æœ';
                    renderStatus.className = 'status error';
                }
            } else {
                mathJaxStatus.textContent = 'æœªåŠ è½½';
                mathJaxStatus.className = 'status error';
                renderStatus.textContent = 'ç­‰å¾…MathJaxåŠ è½½';
                renderStatus.className = 'status error';
            }
            
            loadTime.textContent = `${Date.now() - startTime}ms`;
        }
        
        // å®šæœŸæ›´æ–°çŠ¶æ€
        setInterval(updateStatus, 1000);
        
        // é¡µé¢åŠ è½½å®Œæˆäº‹ä»¶
        window.addEventListener('load', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆ');
            updateStatus();
            
            // 5ç§’åå†æ¬¡æ£€æŸ¥
            setTimeout(() => {
                console.log('å»¶è¿Ÿæ£€æŸ¥MathJaxçŠ¶æ€');
                updateStatus();
                
                // å¦‚æœMathJaxå·²åŠ è½½ä½†æ²¡æœ‰æ¸²æŸ“ç»“æœï¼Œå°è¯•æ‰‹åŠ¨æ¸²æŸ“
                if (window.MathJax && window.MathJax.typesetPromise) {
                    const mathElements = document.querySelectorAll('mjx-container');
                    if (mathElements.length === 0) {
                        console.log('å°è¯•æ‰‹åŠ¨æ¸²æŸ“æ•°å­¦å…¬å¼');
                        window.MathJax.typesetPromise([document.body]).then(() => {
                            console.log('æ‰‹åŠ¨æ¸²æŸ“å®Œæˆ');
                            updateStatus();
                        }).catch(err => {
                            console.error('æ‰‹åŠ¨æ¸²æŸ“å¤±è´¥:', err);
                        });
                    }
                }
            }, 5000);
        });
        
        // MathJaxäº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            if (window.MathJax) {
                window.MathJax.startup.promise.then(() => {
                    console.log('MathJaxå¯åŠ¨å®Œæˆ');
                    updateStatus();
                });
            }
        });
    </script>
</body>
</html> 